import { Address, anagraphicsTypes, Gender_Name, InsuranceStatus, OpStandardBillingCategory_Name, OpStandardPosition_Name, getTabbedAnagraphicSetup, anagraphicsSetups, OperatingRoomStatus } from '@smambu/lib.constantsjs'
import { Anagraphics, AnagraphicsForApi, InputOpStandard, InputRoleFixture, Insurance } from '../types/types'

export const simpleAnagraphic: Anagraphics = {
  title: 'Sig',
  name: 'Teston',
  surname: 'Tested',
  dateOfBirth: '11/11/1111',
  gender: Gender_Name.MALE,
  genderAtBirth: Gender_Name.MALE,
  nationality: 'Testville',
}

export const simpleAnagraphicForApi: AnagraphicsForApi = {
  title: 'Sig',
  name: 'Teston',
  surname: 'Tested',
  birthDate: '1111-11-21',
  gender: Gender_Name.MALE,
  genderBirth: Gender_Name.MALE,
  nationality: 'Testville',
}

export const simpleAddress: Address = {
  street: 'TeststraÃŸe',
  houseNumber: '1',
  postalCode: 'test 123',
  city: 'test city',
  country: 'test country',
}

export const noneInsurance: Insurance = {
  insuranceStatus: InsuranceStatus.NONE,
  cardInsuranceNumber: '',
  insurance: '',
}

export const publicInsurance: Insurance = {
  insuranceStatus: InsuranceStatus.PUBLIC,
  cardInsuranceNumber: '12345',
  insurance: 'public_insurance',
}

export const ALL_PERMISSIONS_ROLE = (role_name: string): InputRoleFixture => ({
  name: role_name,
  capabilities: [
    'P:USERS:VIEW',
    'P:USERS:EDIT',
    'P:USERS:ACTIVATE',
    'P:USERS:CREATE',
    'P:DOCTORS:VIEW',
    'P:ANESTHESIOLOGISTS:VIEW',
    'P:ROLES:VIEW',
    'P:ROLES:EDIT',
    'P:ROLES:DELETE',
    'P:ROLES:CREATE',
    'U:IS_DOCTOR',
    'U:IS_ANESTHESIOLOGIST',
    'P:PATIENTS:VIEW',
    'P:PATIENTS:EDIT',
    'P:TIMERANGE:EDIT',
    'P:FILE_UPLOAD:EDIT',
    'P:PRICE_PER_POINT_VALUE:EDIT',
    'P:VAT:EDIT',
    'P:CONTRACT_DEFAULT_PRICES:VIEW',
    'P:CONTRACT_DEFAULT_PRICES:EDIT',
    'P:DEFAULT_SUBJECT_AREAS:EDIT',
    'P:INVOICE_NUMBERS:EDIT',
    'P:CASE_NUMBERS:EDIT',
    'P:PATIENT_NUMBERS:EDIT',
    'P:DEBTOR_NUMBERS:EDIT',
    'P:SUPPLIER_CODES:EDIT',
    'P:COUNT_CONTROL:EDIT',
    'P:INVOICE_GENERAL_DATA:EDIT',
    'P:REVENUE_ACCOUNT:EDIT',
    'P:ENVIRONMENT_CONFIGS:EDIT',
    'V:CONTRACTS:HIDE',
    'P:CONTRACTS:VIEW',
    'P:CONTRACTS:EDIT',
    'P:CONTRACTS:CREATE',
    'P:CONTRACTS:DELETE',
    'P:D_OPSTANDARD:VIEW',
    'P:D_OPSTANDARD_NAMES:VIEW',
    'P:D_OPSTANDARD:EDIT',
    'P:D_OPSTANDARD:DELETE',
    'P:D_OPSTANDARD:CREATE',
    'P:D_OPSTANDARD:REQUESTCHANGE',
    'P:A_OPSTANDARD:VIEW',
    'P:A_OPSTANDARD_NAMES:VIEW',
    'P:A_OPSTANDARD:CREATE',
    'P:A_OPSTANDARD:DELETE',
    'P:A_OPSTANDARD:EDIT',
    'P:BOOKINGS:CREATE',
    'P:BOOKING_PATIENT_DETAILS:EDIT',
    'P:BOOKINGS:SCHEDULE',
    'P:BOOKINGS_ROOMS:SCHEDULE',
    'P:DAY_BOOKINGS:SCHEDULE',
    'P:BOOKINGS:REJECT',
    'P:BOOKINGS:HOLD',
    'P:BOOKINGS:VIEW',
    'P:CASES:VIEW',
    'P:CASES:EDIT',
    'P:CASES:DURATION:EDIT',
    'P:CASES_STATUS:VIEW',
    'P:CASES_DATABASE_ID:VIEW',
    'P:CASES_CHECKIN:VIEW',
    'P:CASES_CHECKIN:EDIT',
    'P:CASES_BOOKING_INFO:VIEW',
    'P:CASES_BOOKING_INFO:EDIT',
    'P:CASES_SURGERY_INFO:VIEW',
    'P:CASES_SURGERY_INFO:EDIT',
    'P:CASES_BILLING_DETAILS:VIEW',
    'P:CASES_BILLING_DETAILS:EDIT',
    'P:CASES_BILLING:VIEW',
    'P:CASES_PREOP_DOCUMENTATION:VIEW',
    'P:CASES_PREOP_DOCUMENTATION:EDIT',
    'P:CASES_ANESTHESIA_DOCUMENTATION:VIEW',
    'P:CASES_ANESTHESIA_DOCUMENTATION:EDIT',
    'P:CASES_ANESTHESIOLOGIST:ASSIGN',
    'P:CASE_ANESTHESIOLOGIST:ASSIGN_SELF',
    'P:CASES_INTRAOP_DOCUMENTATION:VIEW',
    'P:CASES_INTRAOP_DOCUMENTATION:EDIT',
    'P:CASES_POSTOP_DOCUMENTATION:VIEW',
    'P:CASES_POSTOP_DOCUMENTATION:EDIT',
    'P:CASES_CHECKOUT:VIEW',
    'P:CASES_CHECKOUT:EDIT',
    'P:CASES:EXPORT',
    'V:PREOP:TAB',
    'V:ANESTHESIA:TAB',
    'V:INTRAOP:TAB',
    'V:POSTOP:TAB',
    'V:BILLING:CODES',
    'V:BILLING:CONTACTS',
    'V:CASES:LIST',
    'V:ALL:COLUMNS',
    'V:PATIENTS:COLUMNS',
    'V:STATUS:COLUMNS',
    'V:BOOKING_INFO:COLUMNS',
    'V:DOCTOR:COLUMNS',
    'V:BILLING:COLUMNS',
    'P:CASES:REVIEW',
    'P:PC_MATERIALS:EXPORT',
    'V:BILLING:WARNINGS',
    'P:CASES:CLOSE',
    'P:CASES:REOPEN',
    'P:CALENDAR:VIEW',
    'V:ALL:CALENDAR',
    'V:DAILY:CALENDAR',
    'V:WEEKLY:CALENDAR',
    'V:MONTHLY:CALENDAR',
    'V:ALL_ROOMS:CALENDAR',
    'V:ALL:BOOKINGS',
    'V:CONFIRMED:BOOKINGS',
    'V:ASSIGNED:BOOKINGS',
    'V:PATIENT:STATUS',
    'V:CASE:STATUS',
    'V:INTRAOP:PHASES',
    'P:CALENDAR_NOTES:VIEW',
    'P:CALENDAR_NOTES:EDIT',
    'P:CALENDAR_PREOP_NOTES:VIEW',
    'P:CALENDAR_PREOP_NOTES:EDIT',
    'P:CALENDAR_POSTOP_NOTES:VIEW',
    'P:CALENDAR_POSTOP_NOTES:EDIT',
    'P:BOOKING_NOTES:VIEW',
    'P:BOOKING_NOTES:EDIT',
    'P:PREOP_NOTES:VIEW',
    'P:PREOP_NOTES:EDIT',
    'P:INTRAOP_NOTES:VIEW',
    'P:INTRAOP_NOTES:EDIT',
    'P:POSTOP_NOTES:VIEW',
    'P:POSTOP_NOTES:EDIT',
    'P:SURGERY_NOTES:VIEW',
    'P:SURGERY_NOTES:EDIT',
    'P:CHECKIN_TIMESTAMP:SET',
    'P:CHECKIN_TIMESTAMP:VIEW',
    'P:CHECKIN_TIMESTAMP:EDIT',
    'P:CHECKOUT_TIMESTAMP:SET',
    'P:CHECKOUT_TIMESTAMP:VIEW',
    'P:CHECKOUT_TIMESTAMP:EDIT',
    'P:PREOP_TIMESTAMP:SET',
    'P:PREOP_TIMESTAMP:VIEW',
    'P:PREOP_TIMESTAMP:EDIT',
    'P:ANESTHESIA_TIMESTAMP:SET',
    'P:ANESTHESIA_TIMESTAMP:VIEW',
    'P:ANESTHESIA_TIMESTAMP:EDIT',
    'P:PATIENT_TIMESTAMP:SET',
    'P:PATIENT_TIMESTAMP:VIEW',
    'P:PATIENT_TIMESTAMP:EDIT',
    'P:SURGERY_TIMESTAMP:SET',
    'P:SURGERY_TIMESTAMP:VIEW',
    'P:SURGERY_TIMESTAMP:EDIT',
    'P:POSTOP_TIMESTAMP:SET',
    'P:POSTOP_TIMESTAMP:VIEW',
    'P:POSTOP_TIMESTAMP:EDIT',
    'P:COST_ESTIMATE:CREATE',
    'P:COST_ESTIMATE:VIEW',
    'P:COST_ESTIMATE:DOWNLOAD',
    'P:RECEIPT:VIEW',
    'P:RECEIPT:CREATE',
    'P:RECEIPT:DOWNLOAD',
    'P:BILLS:EDIT',
    'P:BILLS:VIEW',
    'P:BILLS:EXPORT',
    'P:BILLS:GENERATE',
    'P:BILLS:DOWNLOAD',
    'P:BILLS:PRESCRIBED',
    'P:BILLS:CANCEL',
    'P:BILLS:POST',
    'P:BILLS:PAID',
    'V:CANCELLED:BILLS',
    'V:POSTED:BILLS',
    'P:ANESTHESIOLOGIST_SCHEDULE:VIEW',
    'P:ANESTHESIOLOGIST_SCHEDULE:EDIT',
    'P:OR:CREATE',
    'P:OR:VIEW',
    'P:OR:EDIT',
    'P:OR:DELETE',
    'P:AUDITTRAIL:CREATE',
    'P:AUDITTRAIL:DELETE',
    'P:AUDITTRAIL:EDIT',
    'P:AUDITTRAIL:VIEW',
    'P:LOGS:CREATE',
    'P:LOGS:DELETE',
    'P:LOGS:EDIT',
    'P:LOGS:VIEW',
    'P:MATERIALS_DATABASE_NAMES:VIEW',
    'P:MATERIALS_DATABASE:VIEW',
    'P:MATERIALS_DATABASE:EDIT',
    'P:MATERIALS_DATABASE:DELETE',
    'P:MATERIALS_DATABASE:UPLOAD',
    'P:MATERIALS_DATABASE:EXPORT',
    'P:INSURANCES_NAMES:VIEW',
    'P:INSURANCES:VIEW',
    'P:INSURANCES:EDIT',
    'P:INSURANCES:DELETE',
    'P:INSURANCES:UPLOAD',
    'P:INSURANCES:EXPORT',
    'P:STERILE_GOODS_NAMES:VIEW',
    'P:STERILE_GOODS:VIEW',
    'P:STERILE_GOODS:EDIT',
    'P:STERILE_GOODS:DELETE',
    'P:STERILE_GOODS:UPLOAD',
    'P:STERILE_GOODS:EXPORT',
    'P:OPS_CATALOGUE:VIEW',
    'P:OPS_CATALOGUE:EDIT',
    'P:OPS_CATALOGUE:DELETE',
    'P:OPS_CATALOGUE:UPLOAD',
    'P:OPS_CATALOGUE:EXPORT',
    'P:EBM:VIEW',
    'P:EBM:EDIT',
    'P:EBM:DELETE',
    'P:EBM:UPLOAD',
    'P:EBM:EXPORT',
    'P:GOA:VIEW',
    'P:GOA:EDIT',
    'P:GOA:DELETE',
    'P:GOA:UPLOAD',
    'P:GOA:EXPORT',
    'P:DASHBOARD:VIEW',
    'P:DOCUMENTS:VIEW',
    'P:DOCUMENTS:UPLOAD',
    'P:DOCUMENTS:DOWNLOAD',
    'P:CHECKIN_DOCUMENTS:VIEW',
    'P:CHECKIN_DOCUMENTS:UPLOAD',
    'P:CHECKIN_DOCUMENTS:DOWNLOAD',
    'P:CHECKOUT_DOCUMENTS:VIEW',
    'P:CHECKOUT_DOCUMENTS:UPLOAD',
    'P:CHECKOUT_DOCUMENTS:DOWNLOAD',
    'P:INTRAOP_DOCUMENTS:VIEW',
    'P:INTRAOP_DOCUMENTS:UPLOAD',
    'P:INTRAOP_DOCUMENTS:DOWNLOAD',
    'V:DOCUMENTATION:WARNING',
  ],
  scope: 'ALL_DATA',
  domain_scopes: {
    USERS: 'ALL_DATA',
    DOCTORS: 'ALL_DATA',
    ANESTHESIOLOGISTS: 'ALL_DATA',
    ROLES: 'ALL_DATA',
    USER_TYPE: 'ALL_DATA',
    PATIENTS: 'ALL_DATA',
    SYSTEM: 'ALL_DATA',
    CONTRACTS: 'ALL_DATA',
    DOCTORS_OP_STANDARD: 'ALL_DATA',
    ANESTHESIOLOGIST_OP_STANDARD: 'ALL_DATA',
    BOOKING: 'ALL_DATA',
    CASES: 'ALL_DATA',
    CALENDAR: 'ALL_DATA',
    NOTES: 'ALL_DATA',
    TIMESTAMPS: 'ALL_DATA',
    COST_ESTIMATE: 'ALL_DATA',
    RECEIPT: 'ALL_DATA',
    BILLS: 'ALL_DATA',
    OR_MANAGEMENT: 'ALL_DATA',
    AUDIT_TRAIL: 'ALL_DATA',
    LOGS: 'ALL_DATA',
    MATERIALS_DATABASE: 'ALL_DATA',
    STERILE_GOODS: 'ALL_DATA',
    OPS_CATALOGUE: 'ALL_DATA',
    EBM: 'ALL_DATA',
    GOA: 'ALL_DATA',
    DASHBOARD: 'ALL_DATA',
    DOCUMENTS: 'ALL_DATA',
  },
})

export const SIMPLE_OP_STANDARD = (name: string, rooms: string[]): InputOpStandard => ({
  name,
  previousContractOpStandardId: null,
  subjectArea: '',
  operatingRoomIds: rooms,
  surgeryDurationInMinutes: 60,
  bookingSection: {
    anesthesiaList: [],
    sideRequired: false,
    bodyRegions: [],
    spinalSegments: [],
    fingers: [],
    teeth: [],
    feet: [],
    positions: [OpStandardPosition_Name.SUPINE_POSITION],
    userCanUploadDocuments: false,
  },
  preOpSection: {
    instructions: [],
    materials: [],
    medications: [],
    notes: '',
  },
  intraOpSection: {
    gloves: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    positions: [],
    positioningTools: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    equipment: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    disinfection: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    covering: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    surgicalInstruments: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    disposableMaterial: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    sutureMaterial: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    medication_rinse: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    extras: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    particularities: {
      instructions: [],
      materials: [],
      medications: [],
      equipments: [],
      sterileGoods: [],
    },
    tourniquet: {
      blutleere: { required: false },
      tourniquet: { required: false },
    },
    x_ray: { required: false },
    drainage: { required: false },
    monopolar: { required: false },
    bipolar: { required: false },
    histology: { required: false },
    bacteriology: { required: false },
    notes: '',
  },
  postOpSection: {
    postOperativeMeasures: [],
    anesthesiologicalServices: [],
    instructions: [],
    materials: [],
    medications: [],
    notes: '',
  },
  billingSection: {
    billingCategory: OpStandardBillingCategory_Name.AUTO,
  },
})

export const SIMPLE_AVAILABLE_ROOM = (roomName: string): any => ({
  name: roomName,
  tenantId: '',
  operatingRoomId: '',
  customRoomId: '',
  status: OperatingRoomStatus.AVAILABLE,
  exception: null,
  notes: '',
})

export enum INSURANCE_TABS {
  PUBLICINSURANCES = anagraphicsTypes.PUBLICINSURANCES,
  PRIVATEINSURANCES = anagraphicsTypes.PRIVATEINSURANCES,
  BGINSURANCES = anagraphicsTypes.BGINSURANCES
}

const getInsuranceFieldsFromAnagraphicsSetup = (selectedSubType?: anagraphicsTypes) => {
  return getTabbedAnagraphicSetup(anagraphicsSetups.insurances!, selectedSubType).fields
    .reduce<{[key: string]: number}>((obj, field, index) => ({ ...obj, [field.name]: index }), {})
}

export const INSURANCE_FIELDS = {
  [anagraphicsTypes.PUBLICINSURANCES]: getInsuranceFieldsFromAnagraphicsSetup(anagraphicsTypes.PUBLICINSURANCES),
  [anagraphicsTypes.PRIVATEINSURANCES]: getInsuranceFieldsFromAnagraphicsSetup(anagraphicsTypes.PRIVATEINSURANCES),
  [anagraphicsTypes.BGINSURANCES]: getInsuranceFieldsFromAnagraphicsSetup(anagraphicsTypes.BGINSURANCES)
}

export const ANAGRAPHICS_ENDPOINT =
  `${process.env.BACKEND_PROTOCOL}://${process.env.VITE_ANAGRAPHICS_SERVICE_HOST}:${process.env.ANAGRAPHICS_PORT}/api/anagraphics`

export const SCHEDULING_CASES_ENDPOINT =
  `${process.env.BACKEND_PROTOCOL}://${process.env.VITE_SCHEDULING_CASES_SERVICE_HOST}:${process.env.SCHEDULING_CASES_PORT}/api/schedulingcases`

export const CONTRACTS_ENDPOINT =
  `${process.env.BACKEND_PROTOCOL}://${process.env.VITE_CONTRACT_SERVICE_HOST}:${process.env.CONTRACT_PORT}/api/contract`
